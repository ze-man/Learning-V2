<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learning V2.1.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@900&family=Segoe+UI:wght@400;700;800&display=swap" rel="stylesheet" />
    <style>
      :root {
        --neon: #00f2ff;
        --neon-glow: rgba(0, 242, 255, 0.3);
        --neon-border: #00f2ff;
      }

      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #000;
        overflow: hidden;
        font-family: "Segoe UI", sans-serif;
        cursor: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjAwZmYiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzAwZmZmZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwZmYwMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGQ9Ik03IDJMMjQgMTdMMTcgMTdMMjUgMjlMMjEgMzJMMTMgMjBMNyAyNlYyWiIgZmlsbD0idXJsKCNnKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48L3N2Zz4=")
          0 0, auto !important;
      }

      button, a, input, .game-item, .app-item, .nav-btn, .action-btn, #nav-toggle-btn, .auth-tab, .theme-btn {
        cursor: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjAwZmYiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMGZmZmYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJNMTQgNEMxMiA0IDExIDUgMTEgN1YxNUw5IDE0TDcgMTVMOCAxN0wxMiAyMkgxOEMyMCAyMiAyMiAyMCAyMiAxOFY4QzIyIDYgMjAgNSAxOCA1SDE3VjlIMTVWNEgxNFoiIGZpbGw9InVybCgjZykiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41Ii8+PC9zdmc+") 0 0, pointer !important;
      }

      #main-nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: rgba(10, 10, 20, 0.98);
        border-bottom: 2px solid var(--neon-border);
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 20px;
        padding-right: 20px;
        z-index: 1000;
        box-shadow: 0 0 20px var(--neon-glow);
        transition: transform 0.3s ease-in-out;
      }

      #main-nav.nav-hidden {
        transform: translateY(-100%);
      }

      .nav-btn {
        background: transparent;
        border: 1px solid var(--neon-border);
        color: var(--neon);
        padding: 8px 20px;
        border-radius: 20px;
        font-weight: 800;
        text-transform: uppercase;
        font-size: 12px;
        letter-spacing: 1px;
        transition: 0.3s;
      }

      .nav-btn:hover,
      .nav-btn.active {
        background: var(--neon);
        color: #000;
        box-shadow: 0 0 15px var(--neon);
      }

      #nav-toggle-btn {
        position: fixed;
        top: 15px;
        left: 15px;
        width: 35px;
        height: 35px;
        background: rgba(10, 10, 20, 0.9);
        border: 1px solid var(--neon-border);
        border-radius: 8px;
        color: var(--neon);
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1001;
        transition: 0.3s;
      }

      #nav-toggle-btn:hover {
        background: var(--neon);
        color: #000;
      }

      #status-info {
        margin-left: 15px;
        color: var(--neon);
        font-size: 12px;
        display: flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
      }

      .view-zone {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        padding-top: 60px;
        display: none;
        box-sizing: border-box;
        transition: padding 0.3s;
      }

      .view-zone.active {
        display: flex;
        flex-direction: column;
      }

      body.nav-closed .view-zone {
        padding-top: 0;
      }

      #home-zone {
        background: url("https://wallpapercat.com/w/full/5/b/8/2103649-3840x2160-desktop-4k-universe-background-photo.jpg") no-repeat center center fixed;
        background-size: cover;
      }

      #home-zone.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .star-field {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 1;
      }

      .star {
        position: absolute;
        clip-path: polygon(50% 0%, 60% 40%, 100% 50%, 60% 60%, 50% 100%, 40% 60%, 0% 50%, 40% 40%);
        animation: timedGlare 4s infinite, rainbowShift 10s infinite linear;
        z-index: 2;
      }

      @keyframes timedGlare {
        0%, 15%, 85%, 100% { transform: scale(0.7); filter: brightness(1); }
        50% { transform: scale(1.4); filter: brightness(3); }
      }

      @keyframes rainbowShift {
        0% { background: #ff0055; }
        25% { background: #ffdd00; }
        50% { background: #00ff88; }
        75% { background: #00aaff; }
        100% { background: #ff0055; }
      }

      .shooting-star {
        position: absolute;
        width: 3px;
        height: 3px;
        background: #fff;
        border-radius: 50%;
        opacity: 0;
        box-shadow: 0 0 15px 2px white;
        z-index: 3;
      }

      .shooting-star::before {
        content: "";
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 120px;
        height: 1px;
        background: linear-gradient(90deg, #fff, transparent);
      }

      .animate-shooting {
        animation: shoot 2.5s ease-out;
      }

      @keyframes shoot {
        0% { transform: rotate(-35deg) translateX(0); opacity: 1; }
        100% { transform: rotate(-35deg) translateX(-1200px); opacity: 0; }
      }

      .expressive-text {
        z-index: 10;
        font-family: "Unbounded", sans-serif;
        font-size: clamp(2rem, 9vw, 6rem);
        font-weight: 900;
        text-align: center;
        letter-spacing: -3px;
        background: linear-gradient(90deg, #ff0055, #ffdd00, #00ff88, #00aaff, #ff0055);
        background-size: 300% auto;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 5s linear infinite;
      }

      @keyframes shimmer {
        to { background-position: 300% center; }
      }

      .dashboard-zone {
        background: radial-gradient(circle at center, #1a1a2e 0%, #0f0f0f 100%) fixed;
        overflow-y: auto;
      }

      .controls-header {
        padding: 20px;
        position: sticky;
        top: 0;
        background: rgba(20, 20, 25, 0.98);
        z-index: 100;
        display: flex;
        justify-content: center;
        gap: 15px;
        border-bottom: 1px solid var(--neon-glow);
      }

      .search-bar {
        width: 60%;
        max-width: 400px;
        padding: 12px 25px;
        border-radius: 30px;
        border: 1px solid rgba(0, 242, 255, 0.5);
        background: #1a1a2e;
        color: white;
        font-size: 16px;
        outline: none;
      }

      .random-btn {
        padding: 12px 25px;
        border-radius: 30px;
        border: none;
        background: linear-gradient(45deg, var(--neon), #7000ff);
        color: white;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 30px;
        padding: 40px 20px;
        justify-items: center;
        padding-bottom: 100px;
      }

      .game-item, .app-item {
        text-align: center;
        width: 150px;
        transition: transform 0.3s ease;
      }

      .game-item:hover, .app-item:hover {
        transform: scale(1.1);
      }

      .icon-emoji {
        width: 120px;
        height: 120px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 70px;
        filter: drop-shadow(0 0 10px var(--neon-glow));
      }

      .icon-img {
        width: 130px;
        height: 130px;
        object-fit: contain;
        border-radius: 18px;
        margin-bottom: 12px;
        border: 2px solid var(--neon-glow);
        background: rgba(255, 255, 255, 0.05);
        box-shadow: 0 0 10px var(--neon-glow);
      }

      .item-name {
        font-size: 11px;
        font-weight: 800;
        color: rgba(255, 255, 255, 0.9);
        text-transform: uppercase;
        display: block;
        min-height: 35px;
        letter-spacing: 0.5px;
        line-height: 1.2;
      }

      #overlay-container {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #000;
        z-index: 2000;
      }

      iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }

      #close-overlay-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 30px;
        height: 30px;
        font-size: 16px;
        border: none;
        border-radius: 50%;
        background: rgba(255, 75, 43, 0.9);
        color: white;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2001;
        opacity: 0.7;
        transition: 0.3s;
      }

      #close-overlay-btn:hover {
        opacity: 1;
        transform: rotate(90deg);
      }

      #chat-bg-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        background: radial-gradient(circle at center, #1a1a2e 0%, #000000 100%);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      #chat-zone {
        position: relative;
        overflow: hidden;
      }

      #chat-ui-container {
        position: relative;
        z-index: 5;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      #chat-header {
        padding: 15px;
        background: rgba(20, 20, 25, 0.9);
        border-bottom: 1px solid var(--neon-border);
        text-align: center;
      }

      #chat-area {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding: 20px;
        overflow-y: auto;
        padding-bottom: 20px;
      }

      .message-item {
        display: flex;
        align-items: flex-end;
        gap: 10px;
        margin-bottom: 10px;
        animation: fadeIn 0.2s ease;
      }

      .pfp-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--neon-border);
        object-fit: cover;
      }

      .bubble {
        background: rgba(26, 26, 46, 0.95);
        border: 1px solid var(--neon-glow);
        border-radius: 18px 18px 18px 4px;
        padding: 12px 18px;
        font-size: 14px;
        max-width: 70%;
        color: #fff;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        word-wrap: break-word;
      }

      #footer-controls {
        padding: 15px;
        background: rgba(20, 20, 25, 0.95);
        display: flex;
        justify-content: center;
        gap: 10px;
        border-top: 1px solid var(--neon-border);
      }

      .action-btn {
        padding: 10px 18px;
        border-radius: 20px;
        border: none;
        background: linear-gradient(45deg, var(--neon), #7000ff);
        color: white;
        font-weight: bold;
        font-size: 11px;
        text-transform: uppercase;
      }

      #settings-overlay, #login-overlay {
        position: absolute;
        inset: 0;
        background: #0f0f1e;
        z-index: 999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 15px;
      }

      .auth-container {
        background: #1a1a2e;
        padding: 30px;
        border-radius: 20px;
        border: 1px solid var(--neon-border);
        box-shadow: 0 0 30px var(--neon-glow);
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 280px;
      }

      .auth-tabs {
        display: flex;
        justify-content: space-between;
        border-bottom: 2px solid #333;
        margin-bottom: 10px;
      }

      .auth-tab {
        background: none;
        border: none;
        color: #666;
        font-weight: 900;
        font-size: 14px;
        padding-bottom: 10px;
        width: 50%;
        text-transform: uppercase;
        transition: 0.3s;
      }

      .auth-tab.active {
        color: var(--neon);
        border-bottom: 2px solid var(--neon-border);
      }

      .auth-tab:hover {
        color: #fff;
      }

      .auth-input {
        padding: 12px;
        border-radius: 8px;
        background: #0a0a10;
        color: white;
        border: 1px solid #333;
        width: 100%;
        box-sizing: border-box;
        outline: none;
        transition: 0.3s;
      }

      .auth-input:focus {
        border-color: var(--neon-border);
        box-shadow: 0 0 10px var(--neon-glow);
      }

      #name-error {
        color: #ff3333;
        font-size: 11px;
        font-weight: bold;
        text-align: center;
        height: 15px;
        text-transform: uppercase;
      }

      .chat-img {
        max-width: 100%;
        border-radius: 12px;
        border: 1px solid var(--neon-border);
        margin-top: 8px;
        display: block;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
      }

      #updates-zone {
        background: #0a0a15;
        color: #fff;
        overflow-y: auto;
        padding: 20px;
      }

      #updates-zone h2 {
        text-align: center;
        color: var(--neon);
        margin-bottom: 20px;
      }

      #suggest-zone {
        background: #0a0a15;
        overflow: hidden;
      }

      #suggest-zone iframe {
        border: none;
        width: 100%;
        height: 100%;
      }

      /* Settings Zone */
      #settings-zone {
        background: #0a0a15;
        color: #fff;
        padding: 30px;
        overflow-y: auto;
      }

      .theme-btn {
        width: 110px;
        padding: 12px;
        border: none;
        border-radius: 12px;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s;
      }

      .theme-btn:hover {
        transform: scale(1.08);
        box-shadow: 0 0 16px currentColor;
      }

      .theme-btn.active {
        box-shadow: 0 0 16px currentColor;
        transform: scale(1.05);
      }

      .cloak-btn {
        width: 100%;
        padding: 14px;
        font-size: 15px;
        margin: 15px 0 8px;
      }
    </style>
  </head>
  <body>
    <button id="nav-toggle-btn" onclick="toggleNav()">‚ò∞</button>
    <nav id="main-nav">
      <button class="nav-btn active" onclick="switchTab('home', this)">Home</button>
      <button class="nav-btn" onclick="switchTab('games', this)">Games</button>
      <button class="nav-btn" onclick="switchTab('apps', this)">Apps</button>
      <button class="nav-btn" onclick="switchTab('chat', this)">Chat</button>
      <button class="nav-btn" onclick="switchTab('updates', this)">Update Log</button>
      <button class="nav-btn" onclick="switchTab('suggest', this)">Suggest</button>
      <button class="nav-btn" onclick="switchTab('settings', this)">Settings</button>
      <div id="status-info"></div>
    </nav>

    <!-- HOME -->
    <div id="home-zone" class="view-zone active">
      <div class="star-field" id="starField">
        <div id="shooter" class="shooting-star"></div>
      </div>
      <div class="expressive-text">WELCOME TO LEARNING V2</div>
    </div>

    <!-- GAMES -->
    <div id="games-zone" class="view-zone dashboard-zone">
      <div class="controls-header">
        <input type="text" class="search-bar" id="game-search" placeholder="SEARCH GAMES..." onkeyup="filterGrid('games')" />
        <button class="random-btn" onclick="openRandom('games')">üîÄ RANDOM</button>
      </div>
      <div class="grid-container" id="games-grid">
        <div class="game-item" data-url="https://ze-man.github.io/Ragdoll-Archers/"><div class="icon-emoji">üèπ</div><span class="item-name">Ragdoll Archers</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Ragdoll-Hit/"><div class="icon-emoji">ü§ï</div><span class="item-name">Ragdoll Hit</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Banjo-Kazooie/"><div class="icon-emoji">üß©</div><span class="item-name">Banjo‚ÄëKazooie</span></div>
        <div class="game-item" data-url="https://ikneedata.com/meleelight.html"><div class="icon-emoji">‚öîÔ∏è</div><span class="item-name">Melee Light</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/66.html"><div class="icon-emoji">üèÄ</div><span class="item-name">Basket Random</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/half-life/xash.html#150"><div class="icon-emoji">‚ò¢Ô∏è</div><span class="item-name">Half‚ÄëLife</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/HouseOfhazards/"><div class="icon-emoji">üè†</div><span class="item-name">House of Hazards</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/aceattorney/index.html"><div class="icon-emoji">‚öñÔ∏è</div><span class="item-name">Ace Attorney</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Justiceforall/"><div class="icon-emoji">üëî</div><span class="item-name">Justice For All</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Trials-And-tribulations/"><div class="icon-emoji">‚òï</div><span class="item-name">Trials & Tribulations</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Apollo-Justice/"><div class="icon-emoji">üë®‚Äç‚öñÔ∏è</div><span class="item-name">Apollo Justice</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/118.html"><div class="icon-emoji">üåé</div><span class="item-name">Solar Smash</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/216.html"><div class="icon-emoji">‚òéÔ∏è</div><span class="item-name">Thats not my Neighbor</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/breakingthebank/index.html"><div class="icon-emoji">üí∞</div><span class="item-name">Breaking the Bank</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/escapingtheprison/index.html"><div class="icon-emoji">‚õìÔ∏è</div><span class="item-name">Escaping the Prison</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/stealingthediamond/index.html"><div class="icon-emoji">üíé</div><span class="item-name">Stealing the Diamond</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/infiltratingtheairship/index.html"><div class="icon-emoji">‚òÅÔ∏è</div><span class="item-name">Infiltrating the Airship</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/fleeingthecomplex/index.html"><div class="icon-emoji">üè¢</div><span class="item-name">Fleeing the Complex</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddleschool1/index.html"><div class="icon-emoji">üè´</div><span class="item-name">Riddle School 1</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddleschool2/index.html"><div class="icon-emoji">üìô</div><span class="item-name">Riddle School 2</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddleschool3/index.html"><div class="icon-emoji">üìï</div><span class="item-name">Riddle School 3</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddleschool4/index.html"><div class="icon-emoji">üìó</div><span class="item-name">Riddle School 4</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddleschool5/index.html"><div class="icon-emoji">üìì</div><span class="item-name">Riddle School 5</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddletransfer/index.html"><div class="icon-emoji">üëΩ</div><span class="item-name">Riddle Transfer 1</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/riddleschool/riddletransfer2/index.html"><div class="icon-emoji">üõ∏</div><span class="item-name">Riddle Transfer 2</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FNaf-1/"><div class="icon-emoji">üêª</div><span class="item-name">FNAF</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FNaF-2/"><div class="icon-emoji">üê∞</div><span class="item-name">FNAF 2</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FnafLauncher/loader.html?game=3"><div class="icon-emoji">üê•</div><span class="item-name">FNAF 3</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FnafLauncher/loader.html?game=4"><div class="icon-emoji">ü¶ä</div><span class="item-name">FNAF 4</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FnafLauncher/loader.html?game=6"><div class="icon-emoji">ü§°</div><span class="item-name"> FNAF:Sister Location</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FNaF-PizzaSim/"><div class="icon-emoji">üçï</div><span class="item-name">FNAF:Pizzeria Simulator</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FNaF-UCN/"><div class="icon-emoji">üëπ</div><span class="item-name">FNAF:Custom Night</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/445.html"><div class="icon-emoji">üñçÔ∏è</div><span class="item-name">Kindergarten 1</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/446.html"><div class="icon-emoji">üéí</div><span class="item-name">Kindergarten 2</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/501.html"><div class="icon-emoji">üçé</div><span class="item-name">Kindergarten 3</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/465.html"><div class="icon-emoji">ü•õ</div><span class="item-name">Cuphead</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Hollow-Knight/"><div class="icon-emoji">üó°Ô∏è</div><span class="item-name">Hollow Knight</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/sm64/index.html"><div class="icon-emoji">üåü</div><span class="item-name">Super Mario 64</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/supermarioworld/index.html"><div class="icon-emoji">üçÑ</div><span class="item-name">Super Mario World</span></div>
        <div class="game-item" data-url="hhttps://ze-man.github.io/Sanic1/"><div class="icon-emoji">üåÄ</div><span class="item-name">Sonic 1</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Sanic-2/"><div class="icon-emoji">üåÄ</div><span class="item-name">Sonic 2</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/sonicthehedgehog3/index.html"><div class="icon-emoji">üåÄ</div><span class="item-name">Sonic 3</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/starfox64/index.html"><div class="icon-emoji">ü¶ä</div><span class="item-name">Star Fox 64</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/supersmashbros/index.html"><div class="icon-emoji">üí•</div><span class="item-name">Super Smash Bros</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Eaglercraft-launcher/"><div class="icon-emoji">‚õèÔ∏è</div><span class="item-name">Minecraft</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/tetris/index.html"><div class="icon-emoji">üß±</div><span class="item-name">Tetris</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/ovo/index.html"><div class="icon-emoji">üèÉ</div><span class="item-name">OvO</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/OvO2/"><div class="icon-emoji">üö∂‚Äç‚ôÇÔ∏è</div><span class="item-name">OvO 2</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/OvO-Dimensions/"><div class="icon-emoji">ü¶â</div><span class="item-name">OvO Dimensions</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/slope/index.html"><div class="icon-emoji">üìâ</div><span class="item-name">Slope</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/cookieclicker/index.html"><div class="icon-emoji">üç™</div><span class="item-name">Cookie Clicker</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Subway-Surfers-Launcher/"><div class="icon-emoji">üõπ</div><span class="item-name">Subway Surfers LAUNCHER</span></div>
        <div class="game-item" data-url="https://nb-ga.github.io/games-site/projects/bitlife/index.html"><div class="icon-emoji">üß¨</div><span class="item-name">BitLife</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/jetpackjoyride/index.html"><div class="icon-emoji">üéí</div><span class="item-name">Jetpack Joyride</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/stickmanhook/index.html"><div class="icon-emoji">ü™ù</div><span class="item-name">Stickman Hook</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/dinogame/index.html"><div class="icon-emoji">ü¶ñ</div><span class="item-name">Chrome Dino</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Getaway-SHootout/"><div class="icon-emoji">üî´</div><span class="item-name">Getaway Shootout</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Buckshot-Roulette/"><div class="icon-emoji">üé≤</div><span class="item-name">Buckshot Roulette</span></div>
        <div class="game-item" data-url="https://helpdesk.bienaldeescuch.ar/resources/semag/1v1lol/index.html"><div class="icon-emoji">üéØ</div><span class="item-name">1v1.LOL</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/GunSpin/"><div class="icon-emoji">üî´</div><span class="item-name">Gun Spin</span></div>
        <div class="game-item" data-url="https://cubeguide.github.io/econclasshelp/games/drifthunters/index.html"><div class="icon-emoji">üèéÔ∏è</div><span class="item-name">Drift Hunters</span></div>
        <div class="game-item" data-url="https://unblockedgamess3.gitlab.io/drift-hunters-pro/"><div class="icon-emoji">üî•</div><span class="item-name">Drift Hunters Pro</span></div>
        <div class="game-item" data-url="https://ijnfem.github.io/seraph/games/gdlite/index.html"><div class="icon-emoji">üü¶</div><span class="item-name">Geometry Dash Lite</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/SchoolBoyRunaway/"><div class="icon-emoji">üë¶</div><span class="item-name">School Boy Runaway</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/The-man-from-the-window/"><div class="icon-emoji">ü™ü</div><span class="item-name">The man from the window</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/PizzaTower/"><div class="icon-emoji">üçï</div><span class="item-name">Pizza Tower</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Amandatheadventurer/"><div class="icon-emoji">üêë</div><span class="item-name">Amanda The Adventurer</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/People-Playground/"><div class="icon-emoji">üë®</div><span class="item-name">People Playground</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FNaC/"><div class="icon-emoji">üê±</div><span class="item-name">Five Nights Candy's</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/hcr/"><div class="icon-emoji">üöó</div><span class="item-name">Hill Climb Racing</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/ArthursNightmare/"><div class="icon-emoji">üòà</div><span class="item-name">Arthur's Nighmare</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Burgersandfrights/"><div class="icon-emoji">üçî</div><span class="item-name">Burgers and Frights</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FearstoFathom/"><div class="icon-emoji">üè†</div><span class="item-name">Fears to Fathom</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/215.html"><div class="icon-emoji">‚úíÔ∏è</div><span class="item-name">Bendy and ink Machine</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FiveNightsatEpsteins/"><div class="icon-emoji">üë¥</div><span class="item-name">Five Nights at Epstein's</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Blumgi-Rocket/"><div class="icon-emoji">üèéÔ∏è</div><span class="item-name">Blumgi Rocket</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/UNDERTALE-/"><div class="icon-emoji">‚ù§Ô∏è</div><span class="item-name">UNDERTALE</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/FiveNightsAtWinstons/"><div class="icon-emoji">‚úèÔ∏è</div><span class="item-name">Five Nights at Winstons</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Iron-Lung/"><div class="icon-emoji">ü©∏</div><span class="item-name">Iron Lung(watch the movie pls)</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Clover-Pit/"><div class="icon-emoji">üçÄ</div><span class="item-name">Clover Pit</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/30.html"><div class="icon-emoji">üçæ</div><span class="item-name">Bottle Flip 3D</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Ragdoll-Drop/"><div class="icon-emoji">ü§∏</div><span class="item-name">Ragdoll Drop</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Gta-Vice-City/"><div class="icon-emoji">üöì</div><span class="item-name">Gta Vice City</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Geometry-Dash-SUbzero/"><div class="icon-emoji">‚ùÑÔ∏è</div><span class="item-name">Geometry Dash Sub-Zero</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/There-Is-No-game-jackass/"><div class="icon-emoji">üò∂</div><span class="item-name">There is No game</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Slenderman/"><div class="icon-emoji">üìÑ</div><span class="item-name">Slender:The 8 Pages</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/ultimatedoom/"><div class="icon-emoji">üëπ</div><span class="item-name">Doom</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/doom2/"><div class="icon-emoji">üëπ</div><span class="item-name">Doom II: Hell On Earth</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/twerkrace3d/"><div class="icon-emoji">üçë</div><span class="item-name">Twerk Race 3D</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/Granny/"><div class="icon-emoji">üëµ</div><span class="item-name">Granny</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/fuck-you-adan/"><div class="icon-emoji">üéÖ</div><span class="item-name">Santy is Home</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/TombOfTheMask/"><div class="icon-emoji">üé≠</div><span class="item-name">Tomb of The Mask</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/angybirds/"><div class="icon-emoji">üê¶</div><span class="item-name">Angry Birds</span></div>
        <div class="game-item" data-url="https://ze-man.github.io/Smash-Remix/"><div class="icon-emoji">üí•</div><span class="item-name">Smash Remix(MOD)</span></div>
        <div class="game-item" data-url="https://genizymath.github.io/iframe/305.html"><div class="icon-emoji">ü¶ù</div><span class="item-name">Tanuki Sunset</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/hotlinemiami/"><div class="icon-emoji">üêî</div><span class="item-name">Hotline Miami</span></div>
        <div class="game-item" data-url="https://cameronterminator.github.io/baldisbasicsplus/"><div class="icon-emoji">üìè</div><span class="item-name">Baldi's Basics Plus</span></div>
      </div>
    </div>

    <!-- APPS -->
    <div id="apps-zone" class="view-zone dashboard-zone">
      <div class="controls-header">
        <input type="text" class="search-bar" id="app-search" placeholder="SEARCH APPS..." onkeyup="filterGrid('apps')" />
        <button class="random-btn" onclick="openRandom('apps')">üîÄ RANDOM</button>
      </div>
      <div class="grid-container" id="apps-grid">
        <div class="app-item" data-url="https://ssvid.net/en-7">
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/1280px-YouTube_full-color_icon_%282017%29.svg.png" class="icon-img" />
          <span class="item-name">Youtube Downloader</span>
        </div>
        <div class="app-item" data-url="https://demo.emulatorjs.org/">
          <img src="https://raw.githubusercontent.com/EmulatorJS/EmulatorJS/HEAD/docs/Logo.png" class="icon-img" />
          <span class="item-name">Retro Emulator</span>
        </div>
        <div class="app-item" data-url="https://url-opener.com/">
          <img src="https://cdn-icons-png.flaticon.com/512/2065/2065157.png" class="icon-img" />
          <span class="item-name">URL Opener</span>
        </div>
      </div>
    </div>

    <!-- CHAT -->
    <div id="chat-zone" class="view-zone">
      <div id="chat-bg-layer"></div>
      <div id="login-overlay">
        <div class="auth-container">
          <div style="color:var(--neon); font-weight:900; letter-spacing: 2px; text-align:center;">Welcome</div>
          <div class="auth-tabs">
            <button class="auth-tab active" id="tab-login" onclick="setAuthMode('login')">LOGIN</button>
            <button class="auth-tab" id="tab-signup" onclick="setAuthMode('signup')">SIGN UP</button>
          </div>
          <input type="text" id="user-input" class="auth-input" placeholder="USERNAME" autocomplete="off" />
          <input type="password" id="pass-input" class="auth-input" placeholder="PASSWORD" />
          <div id="name-error"></div>
          <button class="action-btn" style="width:100%;" onclick="handleAuthSubmit()">ENTER</button>
        </div>
      </div>

      <div id="settings-overlay" style="display:none;">
        <h2 style="color:var(--neon)">SETTINGS</h2>
        <button class="action-btn" onclick="changeName()">Change Name</button>
        <button class="action-btn" onclick="document.getElementById('pfp-up').click()">Change PFP</button>
        <button class="action-btn" onclick="document.getElementById('bg-up').click()">Change Background</button>
        <button class="action-btn" style="background:#ff3333;" onclick="wipeCloudData()">Wipe Profile</button>
        <button class="action-btn" onclick="toggleSettings()" style="background:#333;">Close</button>
      </div>

      <div id="chat-ui-container">
        <div id="chat-header">
          <div style="color:var(--neon); font-weight:900; letter-spacing: 2px;">LOCAL CHAT</div>
        </div>
        <div id="chat-area"></div>
        <div id="footer-controls">
          <button class="action-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
          <button class="action-btn" onclick="document.getElementById('img-send').click()">üñºÔ∏è</button>
          <input type="text" id="msg-input" placeholder="Type..." style="width:50%; padding:12px; border-radius:25px; border:1px solid var(--neon-border); background:#1a1a2e; color:white; outline:none;" onkeypress="if(event.key==='Enter') send()" />
          <button class="action-btn" onclick="send()">Send</button>
        </div>
      </div>

      <input type="file" id="pfp-up" hidden accept="image/*" onchange="processFile(this, 'pfp')" />
      <input type="file" id="bg-up" hidden accept="image/*" onchange="processFile(this, 'bg')" />
      <input type="file" id="img-send" hidden accept="image/*" onchange="sendImage(this)" />
    </div>

    <!-- UPDATES -->
    <div id="updates-zone" class="view-zone">
      <iframe src="https://docs.google.com/document/d/1iDgURNHAHjC1LSzZ7y6IxyJmem_bS4d22apmq37zQfE/" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
    </div>

    <!-- SUGGEST -->
    <div id="suggest-zone" class="view-zone">
      <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScKxMogBHuS-NoYWyw1hkQcWElSrpfodUyG6P2d1UvzMS4okA/viewform?embedded=true" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
    </div>

    <!-- SETTINGS -->
    <div id="settings-zone" class="view-zone">
      <h2 style="text-align:center; color:var(--neon); margin-bottom:30px;">SETTINGS</h2>
      <div style="max-width:420px; margin:0 auto;">
        <h3 style="color:var(--neon); margin:20px 0 12px;">UI Color</h3>
        <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
          <button class="theme-btn" data-color="#00f2ff" style="background:#00f2ff;" onclick="setThemeColor(this)">Cyan</button>
          <button class="theme-btn" data-color="#ff2e63" style="background:#ff2e63;" onclick="setThemeColor(this)">Red</button>
          <button class="theme-btn" data-color="#00ff9d" style="background:#00ff9d;" onclick="setThemeColor(this)">Green</button>
          <button class="theme-btn" data-color="#d000ff" style="background:#d000ff;" onclick="setThemeColor(this)">Purple</button>
          <button class="theme-btn" data-color="#ffd60a" style="background:#ffd60a; color:#000;" onclick="setThemeColor(this)">Yellow</button>
          <button class="theme-btn" data-color="#ff6b35" style="background:#ff6b35;" onclick="setThemeColor(this)">Orange</button>
          <button class="theme-btn" data-color="#ffffff" style="background:#ffffff; color:#000;" onclick="setThemeColor(this)">White</button>
        </div>

        <h3 style="color:var(--neon); margin:40px 0 12px;">Tab Cloaking</h3>
        <button class="action-btn cloak-btn" style="background:linear-gradient(45deg, #ff5555, #aa0000);" onclick="cloakInAboutBlank()">
          Open in about:blank (cloak tab)
        </button>
        <p style="font-size:13px; color:#aaa; text-align:center; line-height:1.4;">
          Results may vary<br>
          (if you see this you're not blind)
        </p>
      </div>
    </div>

    <!-- OVERLAY -->
    <div id="overlay-container">
      <button id="close-overlay-btn" onclick="closeOverlay()">‚úï</button>
      <iframe id="overlay-frame" src=""></iframe>
    </div>

    <script>
      // Navigation
      function toggleNav() {
        document.getElementById("main-nav").classList.toggle("nav-hidden");
        document.body.classList.toggle("nav-closed");
      }

      function switchTab(zoneId, btn) {
        document.querySelectorAll(".view-zone").forEach(z => z.classList.remove("active"));
        document.getElementById(zoneId + "-zone").classList.add("active");
        document.querySelectorAll(".nav-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
      }

      // Status bar
      const statusInfo = document.getElementById("status-info");
      function updateStatus() {
        const now = new Date();
        const time = now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
        if (navigator.getBattery) {
          navigator.getBattery().then(bat => {
            const level = Math.round(bat.level * 100) + "%";
            const charging = bat.charging ? "‚ö°" : "";
            statusInfo.textContent = `${time} | ${level}${charging}`;
          });
        } else {
          statusInfo.textContent = time;
        }
      }
      updateStatus();
      setInterval(updateStatus, 1000);

      // Home animation
      const field = document.getElementById("starField");
      const shooter = document.getElementById("shooter");
      for (let i = 0; i < 35; i++) {
        let x, y, dist;
        do {
          x = Math.random() * 100;
          y = Math.random() * 100;
          dist = Math.sqrt(Math.pow(x - 50, 2) + Math.pow(y - 50, 2));
        } while (dist < 23);
        const star = document.createElement("div");
        star.className = "star";
        const size = Math.random() * 12 + 8;
        star.style.left = x + "%";
        star.style.top = y + "%";
        star.style.width = size + "px";
        star.style.height = size + "px";
        star.style.animationDelay = Math.random() * -10 + "s";
        field.appendChild(star);
      }

      function launchShootingStar() {
        shooter.style.top = Math.random() * 40 + "%";
        shooter.style.left = Math.random() * 30 + 70 + "%";
        shooter.classList.add("animate-shooting");
        setTimeout(() => shooter.classList.remove("animate-shooting"), 2500);
        setTimeout(launchShootingStar, Math.random() * 8000 + 5000);
      }
      launchShootingStar();

      // Overlay logic
      const overlay = document.getElementById("overlay-container");
      const frame = document.getElementById("overlay-frame");

      document.querySelectorAll(".game-item, .app-item").forEach(item => {
        item.onclick = () => {
          const url = item.getAttribute("data-url");
          if (url) {
            frame.src = url;
            overlay.style.display = "block";
            document.getElementById("main-nav").style.display = "none";
            document.getElementById("nav-toggle-btn").style.display = "none";
          }
        };
      });

      function closeOverlay() {
        frame.src = "";
        overlay.style.display = "none";
        document.getElementById("main-nav").style.display = "flex";
        document.getElementById("nav-toggle-btn").style.display = "flex";
      }

      function filterGrid(type) {
        const term = document.getElementById(type === "games" ? "game-search" : "app-search").value.toLowerCase();
        document.querySelectorAll(`#${type}-grid > div`).forEach(item => {
          const name = item.querySelector(".item-name").innerText.toLowerCase();
          item.style.display = name.includes(term) ? "block" : "none";
        });
      }

      function openRandom(type) {
        const visible = Array.from(document.querySelectorAll(`#${type}-grid > div`))
                          .filter(i => i.style.display !== "none");
        if (visible.length) visible[Math.floor(Math.random() * visible.length)].click();
      }

      // Theme system
      function setThemeColor(btn) {
        const color = btn.getAttribute("data-color");
        document.documentElement.style.setProperty("--neon", color);
        document.documentElement.style.setProperty("--neon-border", color);

        let glow = color + "4d";
        if (color === "#ffd60a" || color === "#ffffff") glow = color + "80";
        document.documentElement.style.setProperty("--neon-glow", glow);

        document.querySelectorAll(".theme-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        localStorage.setItem("freedom_theme", color);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("freedom_theme");
      if (savedTheme) {
        document.documentElement.style.setProperty("--neon", savedTheme);
        document.documentElement.style.setProperty("--neon-border", savedTheme);
        let glow = savedTheme + "4d";
        if (savedTheme === "#ffd60a" || savedTheme === "#ffffff") glow = savedTheme + "80";
        document.documentElement.style.setProperty("--neon-glow", glow);
        document.querySelector(`.theme-btn[data-color="${savedTheme}"]`)?.classList.add("active");
      }

      // about:blank cloaking
      function cloakInAboutBlank() {
        if (!confirm("This will try to open the current page in a new about:blank tab.\n\nContinue?")) return;

        const fullHTML = document.documentElement.outerHTML;
        const blob = new Blob([fullHTML], {type: "text/html"});
        const url = URL.createObjectURL(blob);

        const newWin = window.open("about:blank", "_blank");
        if (newWin) {
          newWin.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
              <title>Google Docs</title>
              <link rel="icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico">
            </head>
            <body style="margin:0; padding:0; overflow:hidden;">
              <iframe src="${url}" style="width:100vw; height:100vh; border:none;"></iframe>
            </body>
            </html>
          `);
          newWin.document.close();

          // Optional: try to close current tab (works in some environments only)
          setTimeout(() => { try { window.close(); } catch(e) {} }, 1200);
        } else {
          alert("Popup was blocked.\nPlease allow popups for this site to use the cloaking feature.");
        }
      }

      // ‚îÄ‚îÄ Chat / Auth logic ‚îÄ‚îÄ
      let userData = { username: "", pfp: "https://www.gravatar.com/avatar/?d=mp", bg: "" };
      let receivedMsgIds = [];
      let authMode = "login";

      const storedUser = localStorage.getItem("freedom_user");
      if (storedUser) {
        userData = JSON.parse(storedUser);
        document.getElementById("login-overlay").style.display = "none";
        if (userData.bg) document.getElementById("chat-bg-layer").style.background = `url('${userData.bg}') center center / cover no-repeat fixed`;
        loadChatHistory();
      }

      function setAuthMode(mode) {
        authMode = mode;
        document.getElementById("tab-login").classList.toggle("active", mode === "login");
        document.getElementById("tab-signup").classList.toggle("active", mode === "signup");
        document.getElementById("name-error").innerText = "";
      }

      function handleAuthSubmit() {
        const u = document.getElementById("user-input").value.trim();
        if (!u) {
          document.getElementById("name-error").innerText = "USERNAME REQUIRED";
          return;
        }
        userData.username = u;
        localStorage.setItem("freedom_user", JSON.stringify(userData));
        document.getElementById("login-overlay").style.display = "none";
        loadChatHistory();
      }

      function loadChatHistory() {
        const stored = localStorage.getItem("freedom_chat");
        if (stored) {
          JSON.parse(stored).forEach(msg => {
            if (!receivedMsgIds.includes(msg.id)) {
              receivedMsgIds.push(msg.id);
              renderMessage(msg);
            }
          });
        }
      }

      function send() {
        const input = document.getElementById("msg-input");
        const txt = input.value.trim();
        if (!txt) return;
        const id = Date.now();
        const msg = { user: userData.username, text: txt, pic: userData.pfp, id };
        saveMessageLocally(msg);
        receivedMsgIds.push(id);
        renderMessage(msg);
        input.value = "";
      }

      function sendImage(input) {
        if (!input.files?.[0]) return;
        const reader = new FileReader();
        reader.onload = e => {
          const id = Date.now();
          const msg = { user: userData.username, pic: userData.pfp, img: e.target.result, id };
          saveMessageLocally(msg);
          receivedMsgIds.push(id);
          renderMessage(msg);
        };
        reader.readAsDataURL(input.files[0]);
      }

      function saveMessageLocally(msg) {
        let history = JSON.parse(localStorage.getItem("freedom_chat") || "[]");
        history.push(msg);
        if (history.length > 50) history.shift();
        localStorage.setItem("freedom_chat", JSON.stringify(history));
      }

      function renderMessage(data) {
        const area = document.getElementById("chat-area");
        const content = data.text ? `<div>${data.text}</div>` : `<img src="${data.img}" class="chat-img" />`;
        area.insertAdjacentHTML("beforeend", `
          <div class="message-item">
            <div style="text-align:center; min-width:65px;">
              <img src="${data.pic || "https://www.gravatar.com/avatar/?d=mp"}" class="pfp-icon" />
              <div style="font-size:9px; color:#7000ff; font-weight:800; text-transform:uppercase; margin-top:4px;">
                ${data.user}
              </div>
            </div>
            <div class="bubble">${content}</div>
          </div>
        `);
        area.scrollTop = area.scrollHeight;
      }

      function processFile(input, type) {
        if (!input.files?.[0]) return;
        const reader = new FileReader();
        reader.onload = e => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement("canvas");
            const max = type === "pfp" ? 150 : 1920;
            let w = img.width, h = img.height;
            const scale = Math.min(max / w, max / h, 1);
            canvas.width = w * scale; canvas.height = h * scale;
            canvas.getContext("2d").drawImage(img, 0, 0, canvas.width, canvas.height);
            const dataUrl = canvas.toDataURL("image/jpeg", 0.6);
            if (type === "pfp") userData.pfp = dataUrl;
            else {
              userData.bg = dataUrl;
              document.getElementById("chat-bg-layer").style.background = `url('${dataUrl}') center center / cover no-repeat fixed`;
            }
            localStorage.setItem("freedom_user", JSON.stringify(userData));
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(input.files[0]);
      }

      function toggleSettings() {
        const s = document.getElementById("settings-overlay");
        s.style.display = (s.style.display === "none" || s.style.display === "") ? "flex" : "none";
      }

      function wipeCloudData() {
        if (confirm("Wipe profile & chat data?")) {
          localStorage.removeItem("freedom_user");
          localStorage.removeItem("freedom_chat");
          localStorage.removeItem("freedom_theme");
          location.reload();
        }
      }

      function changeName() {
        const n = prompt("New username:", userData.username);
        if (n && n.trim()) {
          userData.username = n.trim();
          localStorage.setItem("freedom_user", JSON.stringify(userData));
        }
      }
    </script>
  </body>
</html>























